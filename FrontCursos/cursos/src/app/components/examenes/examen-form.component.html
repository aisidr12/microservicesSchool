<hr>
<div class="card bg-light mb-3">
    <div class="card-header">{{titulo}}</div>
    <div class="card-body">
        <button class="btn btn-secondary my-2" routerLink="/examenes">Volver</button>

        <form>
            <div class="form-group">
                <label for="nombre" id="nombre">Nombre</label>
                <input type="text" name="nombre" class="form-control" [(ngModel)]="model.nombre">
                <div class="alert alert-danger" *ngIf="error?.nombre">
                    {{error.nombre}}
                </div>
            </div>      

            <div class="form-group">
                <label for="asignaturaPadre">Asignatura Padre</label>
                <select (change)="cargarHijos()"   [(ngModel)] = "model.asignaturaPadre" 
                [compareWith]="compararAsignatura" class="form-control" name="asignaturaPadre" id="asignaturaPadre">
                <option [ngValue]="undefined">--- seleccionar una asignatura ---</option>
                <option *ngFor="let asignatura of asignaturaPadre"
                [ngValue]="asignatura">{{asignatura.nombre}}</option>                
                </select>
            </div>
            <div class="alert alert-danger" *ngIf="error?.nombre">
                {{error.asignaturaPadre}}
            </div>
            <div class="form-group">
                <label for="asignaturaHija">Asignatura Hija</label>
                <select [(ngModel)] = "model.asignaturaHija" 
                [compareWith]="compararAsignatura" class="form-control" name="asignaturaHija" id="asignaturaHija">
                <option [ngValue]="undefined">--- seleccionar una asignatura ---</option>
                <option *ngFor="let asignatura of asignaturaHija"
                [ngValue]="asignatura">{{asignatura.nombre}}</option>                
                </select>
            </div>
            <div class="alert alert-danger" *ngIf="error?.nombre">
                {{error.asignaturaHija}}
            </div>
                <button (click)="agregarPregunta()" class="btn btn-dark btn-lg my-3">
                    Agregar Pregunta
                </button>

                <div class="form-group" *ngFor="let pregunta of model.preguntas;let i = index">
                    <div class="row">
                        <div class="col-sm-2">
                           <label>Pregunta {{i+1}}:</label> 
                        </div>
                     
                        <div class="col-sm-6">
                               <input type="text" value="{{pregunta.texto}}" class="form-control" 
                        (change)="asignarTexto(pregunta,$event)">
                        </div>
                        <div class="col-sm-2">
                            <button class="btn btn-danger btn-sm" (click)="eliminarPregunta(pregunta)"></button>
                        </div>
                     
                    </div>
                  
                </div>
                <div class="alert alert-danger" *ngIf="errorPregunta">
                    {{errorPregunta}}
                </div>
            <button type="button" class="btn btn-primary" (click)="model.id?editar():crear()">
                {{
                model.id? 'Editar':'Crear'
                }}
            </button>
        </form>
    </div>
</div>
